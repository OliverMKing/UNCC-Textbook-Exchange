<% provide(:title, "Your Account") %>

<div class= 'm-1 p-2 border' style="background-color:#e9ecef; border-color: #dee2e6; height: 100%">
  <h2 class='text-primary'>User Info</h2>
  <h5 style="margin: 10px 0px 0px 0px">First Name</h5>
  <%= @user.fname %>
  <h5 style="margin: 10px 0px 0px 0px">Last Name</h5>
  <%= @user.lname %>
  <h5 style="margin: 10px 0px 0px 0px">Email</h5>
  <%= @user.email %>
  <%= button_to 'Edit User Info', edit_user_path(current_user), :class => 'btn btn-primary btn-block my-2', :method => :get %>
  <%= button_to 'Change Password', change_password_url, :class => 'btn btn-primary btn-block my-2', :method => :get %>
  <%= button_to 'Delete Account', current_user, :class => 'btn btn-primary btn-block my-2', :method => :delete, data: {confirm: "Are you sure you want to delete your user account?" } %>
  <% if @user.admin? %>
    <%= button_to 'View Reports', reports_url, :class => 'btn btn-primary btn-block my-2', :method => :get %>
  <% end %>  
</div>

<div class='col'>
  <div class='row w-100 justify-content-center m-0'>
    <h2 class='text-primary'>Your Listings</h2>
  </div>
  <div class='row w-100 h-50 m-0'>
  <% if @user.listings.first.nil? %>
    <div class='col justify-content-center d-flex align-items-center'>
    <p class='text-center'>
      You do not have any listings yet, click <%= link_to 'here', new_listing_path %> to create one.<br>
      Once you have some listings, they will show up on this page.
    </p>
    </div>
  <% else %>
    <div class="row w-100 m-0">
      <div class="table-responsive">
        <table id="dttb" class="table table-bordered table-hover table-condensed">
          <thead class="thead-light">
            <tr>
              <th>Title</th>
              <th>ISBN</th>
              <th>Condition</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <%= render @user.listings %>
          </tbody>
        </table>
      </div>
    </div>
  <% end %>
  </div>
</div>